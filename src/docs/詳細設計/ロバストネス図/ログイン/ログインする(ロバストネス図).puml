@startuml

actor ユーザー

boundary ログイン画面
boundary ポーカースタート画面
control 必須チェックを実施
control ログインチェックを実施
control ログインセッションを作成する
control ポーカースタート画面を表示する
control ログインユーザー情報を更新する
control ログインセッションを作成する
control ログインユーザー情報を保存する
control 所持金情報を取得する
control 所持金情報を更新する
control 所持金情報を保存する
control ログイン済みチェックを実施
control エラーを表示する
control ポップアップを表示する
control ログイン済みフラグを確認
entity 登録済みユーザー一覧
entity ログインユーザー
entity ログインセッション
entity 所持金情報


'基本コース
ログイン画面 -right-> ユーザー
ユーザー -right-> 必須チェックを実施 : ユーザー名・パスワードを入力して、ログインボタンをクリック
必須チェックを実施 -right-> ログインチェックを実施
ログインチェックを実施 -down-> ログイン済みチェックを実施
ログイン済みチェックを実施 -down-> ログインユーザー情報を更新する : ログインユーザーが、\nその日既にログインしている場合
note right : ログイン日時を更新
ログインユーザー情報を更新する -down-> ログインユーザー情報を保存する
ログインユーザー情報を保存する -down-> ログインセッションを作成する
ログインセッションを作成する --> ログイン済みフラグを確認
ログイン済みフラグを確認 --> ポーカースタート画面を表示する : ログイン済みフラグがtrue
ポーカースタート画面を表示する -left-> ポーカースタート画面

ログインチェックを実施 -- 登録済みユーザー一覧
ログイン済みチェックを実施 -- ログインユーザー
ログインユーザー情報を更新する -- ログインユーザー
ログインユーザー情報を保存する -- ログインユーザー
ログインセッションを作成する -- ログインセッション

'代替コース
必須チェックを実施 -down-> エラーを表示する : 必須チェックに引っかかった場合
ログインチェックを実施 -down-> エラーを表示する : ログインチェックに引っかかった場合
エラーを表示する -up-> ログイン画面
ログイン済みチェックを実施 --> 所持金情報を取得する : ログインユーザーが、\nその日初めてのログインの場合
所持金情報を取得する --> 所持金情報を更新する
所持金情報を更新する --> 所持金情報を保存する
所持金情報を保存する --> ログインユーザー情報を更新する
ログイン済みフラグを確認 --> ポップアップを表示する : ログイン済みフラグがfalse
ポップアップを表示する -up-> ポーカースタート画面を表示する : ポップアップの閉じるボタンをクリック

所持金情報を取得する -- 所持金情報
所持金情報を更新する -- 所持金情報
所持金情報を保存する -- 所持金情報


@enduml